# Notification System Architecture

## ğŸ—ï¸ System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (Next.js)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Admin Dashboard â”‚  â”‚Customer Dashboardâ”‚  â”‚Employee Dashboardâ”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Navbar    â”‚  â”‚  â”‚  â”‚  Navbar    â”‚  â”‚  â”‚  â”‚ EmployeeNavâ”‚  â”‚ â”‚
â”‚  â”‚  â”‚  with      â”‚  â”‚  â”‚  â”‚  with      â”‚  â”‚  â”‚  â”‚  bar with  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Notif ğŸ””  â”‚  â”‚  â”‚  â”‚  Notif ğŸ””  â”‚  â”‚  â”‚  â”‚  Notif ğŸ””  â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                     â”‚                     â”‚            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                 â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         Notification Integration Layer (Client-Side)        â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  notificationsApi.ts (REST API Helper)              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ getAllNotifications()                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ getUnreadNotificationCount()                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ markNotificationAsRead()                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ markAllNotificationsAsRead()                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ deleteNotification()                             â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ formatNotificationTime()                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ getNotificationStyle()                           â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  notificationWebSocket.ts (WebSocket Service)       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ connect(userId, role, callback)                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ disconnect()                                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ isConnected()                                     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Auto-reconnection (max 5 attempts)               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Exponential backoff                              â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  notification.types.ts (TypeScript Types)           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Notification interface                           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ NotificationType enum                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ WebSocketNotificationMessage interface           â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚                                  â”‚
â”‚                                 â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                            â”‚
              REST API                      WebSocket
            (HTTP/HTTPS)                  (WS/WSS + SockJS)
                    â”‚                            â”‚
                    â”‚                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        BACKEND (Spring Boot)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  WebSocketConfig.java                                        â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚  â”‚  Endpoint: /ws/notifications                                 â”‚ â”‚
â”‚  â”‚  SockJS Enabled                                              â”‚ â”‚
â”‚  â”‚  CORS Configuration                                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  NotificationController.java (REST API)                      â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚  â”‚  GET  /api/notifications                                     â”‚ â”‚
â”‚  â”‚  GET  /api/notifications/unread                              â”‚ â”‚
â”‚  â”‚  GET  /api/notifications/unread/count                        â”‚ â”‚
â”‚  â”‚  PUT  /api/notifications/{id}/read                           â”‚ â”‚
â”‚  â”‚  PUT  /api/notifications/read-all                            â”‚ â”‚
â”‚  â”‚  DELETE /api/notifications/{id}                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  NotificationService.java                                    â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚  â”‚  â€¢ createAndSendNotification()                               â”‚ â”‚
â”‚  â”‚  â€¢ notifyCustomer()                                          â”‚ â”‚
â”‚  â”‚  â€¢ notifyEmployee()                                          â”‚ â”‚
â”‚  â”‚  â€¢ notifyAdmin()                                             â”‚ â”‚
â”‚  â”‚  â€¢ markAsRead()                                              â”‚ â”‚
â”‚  â”‚  â€¢ deleteNotification()                                      â”‚ â”‚
â”‚  â”‚  â€¢ getUserNotifications()                                    â”‚ â”‚
â”‚  â”‚                                                               â”‚ â”‚
â”‚  â”‚  Uses SimpMessagingTemplate for WebSocket                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  AppointmentService.java (Integrated)                        â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚  â”‚  Calls NotificationService on:                               â”‚ â”‚
â”‚  â”‚  â€¢ Appointment created                                       â”‚ â”‚
â”‚  â”‚  â€¢ Appointment confirmed                                     â”‚ â”‚
â”‚  â”‚  â€¢ Appointment cancelled                                     â”‚ â”‚
â”‚  â”‚  â€¢ Employee assigned                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  NotificationRepository.java                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚  â”‚  JPA Repository for Notification entity                      â”‚ â”‚
â”‚  â”‚  Custom queries for filtering and counting                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Database (MySQL/PostgreSQL)                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚ â”‚
â”‚  â”‚  notifications table                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ id                                                       â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ title                                                    â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ message                                                  â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ type                                                     â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ recipient_id                                            â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ appointment_id                                          â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ is_read                                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€â”€ created_at                                              â”‚ â”‚
â”‚  â”‚  â””â”€â”€ read_at                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagrams

### 1. Initial Load (REST API)
```
User Logs In
     â”‚
     â”œâ”€â†’ Store authToken + user data in localStorage
     â”‚
     â”œâ”€â†’ Component mounts
     â”‚
     â”œâ”€â†’ getAllNotifications()
     â”‚        â”‚
     â”‚        â””â”€â†’ GET /api/notifications
     â”‚                  â”‚
     â”‚                  â””â”€â†’ NotificationController
     â”‚                           â”‚
     â”‚                           â””â”€â†’ NotificationService
     â”‚                                    â”‚
     â”‚                                    â””â”€â†’ Database
     â”‚                                           â”‚
     â”‚                                           â””â”€â†’ Returns notifications
     â”‚
     â”œâ”€â†’ getUnreadNotificationCount()
     â”‚        â”‚
     â”‚        â””â”€â†’ GET /api/notifications/unread/count
     â”‚                  â”‚
     â”‚                  â””â”€â†’ Returns count
     â”‚
     â””â”€â†’ Display in UI with badge
```

### 2. Real-Time Notification (WebSocket)
```
Backend Event (e.g., Appointment Created)
     â”‚
     â”œâ”€â†’ AppointmentService
     â”‚        â”‚
     â”‚        â””â”€â†’ NotificationService.notifyCustomer()
     â”‚                 â”‚
     â”‚                 â”œâ”€â†’ Save to Database
     â”‚                 â”‚
     â”‚                 â””â”€â†’ SimpMessagingTemplate.convertAndSend()
     â”‚                          â”‚
     â”‚                          â””â”€â†’ Topic: /topic/notifications/user.{id}
     â”‚
     â”œâ”€â†’ WebSocket delivers message to connected clients
     â”‚
     â”œâ”€â†’ Frontend: handleWebSocketNotification()
     â”‚        â”‚
     â”‚        â”œâ”€â†’ Add to notifications array
     â”‚        â”œâ”€â†’ Increment unread count
     â”‚        â”œâ”€â†’ Show browser notification (if permitted)
     â”‚        â””â”€â†’ Update UI
     â”‚
     â””â”€â†’ User sees notification instantly ğŸ””
```

### 3. Mark as Read (User Action)
```
User Clicks Notification
     â”‚
     â”œâ”€â†’ handleNotificationClick()
     â”‚        â”‚
     â”‚        â”œâ”€â†’ markNotificationAsRead(id)
     â”‚        â”‚        â”‚
     â”‚        â”‚        â””â”€â†’ PUT /api/notifications/{id}/read
     â”‚        â”‚                 â”‚
     â”‚        â”‚                 â””â”€â†’ NotificationController
     â”‚        â”‚                          â”‚
     â”‚        â”‚                          â””â”€â†’ NotificationService
     â”‚        â”‚                                   â”‚
     â”‚        â”‚                                   â””â”€â†’ Update Database
     â”‚        â”‚                                          â”‚
     â”‚        â”‚                                          â””â”€â†’ Returns updated notification
     â”‚        â”‚
     â”‚        â”œâ”€â†’ Update local state (isRead = true)
     â”‚        â”œâ”€â†’ Decrement unread count
     â”‚        â”‚
     â”‚        â””â”€â†’ Navigate to related page
     â”‚
     â””â”€â†’ Notification marked as read âœ“
```

## ğŸŒ WebSocket Connection Lifecycle

```
Component Mount
     â”‚
     â”œâ”€â†’ Get user from localStorage
     â”‚
     â”œâ”€â†’ notificationWebSocketService.connect(userId, role, callback)
     â”‚        â”‚
     â”‚        â”œâ”€â†’ Create STOMP Client with SockJS
     â”‚        â”‚
     â”‚        â”œâ”€â†’ Attempt Connection
     â”‚        â”‚        â”‚
     â”‚        â”‚        â”œâ”€â†’ Success âœ“
     â”‚        â”‚        â”‚     â”‚
     â”‚        â”‚        â”‚     â”œâ”€â†’ Subscribe to /topic/notifications/user.{userId}
     â”‚        â”‚        â”‚     â”‚
     â”‚        â”‚        â”‚     â””â”€â†’ If Admin: Subscribe to /topic/notifications/admin
     â”‚        â”‚        â”‚
     â”‚        â”‚        â””â”€â†’ Failure âœ—
     â”‚        â”‚              â”‚
     â”‚        â”‚              â””â”€â†’ Wait (exponential backoff)
     â”‚        â”‚                    â”‚
     â”‚        â”‚                    â””â”€â†’ Retry (max 5 attempts)
     â”‚        â”‚
     â”‚        â””â”€â†’ Listen for messages
     â”‚
     â”œâ”€â†’ User interacts with app
     â”‚        â”‚
     â”‚        â””â”€â†’ Receive real-time notifications
     â”‚
     â””â”€â†’ Component Unmount / User Logs Out
              â”‚
              â””â”€â†’ notificationWebSocketService.disconnect()
                       â”‚
                       â”œâ”€â†’ Unsubscribe from topics
                       â”‚
                       â””â”€â†’ Close connection
```

## ğŸ¯ Notification Types Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NOTIFICATION TYPES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  APPOINTMENT_CREATED                                         â”‚
â”‚  â”œâ”€â†’ Triggered: Customer creates appointment                â”‚
â”‚  â”œâ”€â†’ Recipients: Admin, Customer                            â”‚
â”‚  â””â”€â†’ Color: Blue                                            â”‚
â”‚                                                              â”‚
â”‚  APPOINTMENT_CONFIRMED                                       â”‚
â”‚  â”œâ”€â†’ Triggered: Admin approves appointment                  â”‚
â”‚  â”œâ”€â†’ Recipients: Customer                                   â”‚
â”‚  â””â”€â†’ Color: Green                                           â”‚
â”‚                                                              â”‚
â”‚  APPOINTMENT_CANCELLED                                       â”‚
â”‚  â”œâ”€â†’ Triggered: Admin/Customer cancels                      â”‚
â”‚  â”œâ”€â†’ Recipients: Customer, Admin, Employee (if assigned)    â”‚
â”‚  â””â”€â†’ Color: Red                                             â”‚
â”‚                                                              â”‚
â”‚  EMPLOYEE_ASSIGNED                                           â”‚
â”‚  â”œâ”€â†’ Triggered: Admin assigns employee                      â”‚
â”‚  â”œâ”€â†’ Recipients: Employee, Customer                         â”‚
â”‚  â””â”€â†’ Color: Purple                                          â”‚
â”‚                                                              â”‚
â”‚  STATUS_CHANGED_IN_SERVICE                                   â”‚
â”‚  â”œâ”€â†’ Triggered: Employee updates status                     â”‚
â”‚  â”œâ”€â†’ Recipients: Customer, Admin                            â”‚
â”‚  â””â”€â†’ Color: Yellow                                          â”‚
â”‚                                                              â”‚
â”‚  STATUS_CHANGED_READY                                        â”‚
â”‚  â”œâ”€â†’ Triggered: Service complete, ready for pickup          â”‚
â”‚  â”œâ”€â†’ Recipients: Customer, Admin                            â”‚
â”‚  â””â”€â†’ Color: Indigo                                          â”‚
â”‚                                                              â”‚
â”‚  STATUS_CHANGED_COMPLETED                                    â”‚
â”‚  â”œâ”€â†’ Triggered: Customer picks up vehicle                   â”‚
â”‚  â”œâ”€â†’ Recipients: Admin                                      â”‚
â”‚  â””â”€â†’ Color: Green                                           â”‚
â”‚                                                              â”‚
â”‚  GENERAL                                                     â”‚
â”‚  â”œâ”€â†’ Triggered: Various system events                       â”‚
â”‚  â”œâ”€â†’ Recipients: Based on context                           â”‚
â”‚  â””â”€â†’ Color: Gray                                            â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow

```
Login Process
     â”‚
     â”œâ”€â†’ User enters credentials
     â”‚
     â”œâ”€â†’ POST /api/auth/login
     â”‚        â”‚
     â”‚        â””â”€â†’ Backend validates
     â”‚                 â”‚
     â”‚                 â””â”€â†’ Returns JWT token + user data
     â”‚
     â”œâ”€â†’ Frontend stores in localStorage
     â”‚        â”‚
     â”‚        â”œâ”€â†’ authToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
     â”‚        â”‚
     â”‚        â””â”€â†’ user: { id, username, email, role, profileImage }
     â”‚
     â”œâ”€â†’ Every API request includes token
     â”‚        â”‚
     â”‚        â””â”€â†’ Header: Authorization: Bearer {token}
     â”‚
     â””â”€â†’ WebSocket connects with user ID from localStorage
```

## ğŸ“Š State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Component State (React)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  const [notifications, setNotifications]            â”‚
â”‚       â†‘                                             â”‚
â”‚       â”‚ Updated by:                                 â”‚
â”‚       â”œâ”€â†’ getAllNotifications() (initial load)     â”‚
â”‚       â”œâ”€â†’ handleWebSocketNotification() (real-time)â”‚
â”‚       â””â”€â†’ markNotificationAsRead() (user action)   â”‚
â”‚                                                      â”‚
â”‚  const [unreadCount, setUnreadCount]                â”‚
â”‚       â†‘                                             â”‚
â”‚       â”‚ Updated by:                                 â”‚
â”‚       â”œâ”€â†’ getUnreadNotificationCount() (initial)   â”‚
â”‚       â”œâ”€â†’ +1 when new notification arrives         â”‚
â”‚       â””â”€â†’ -1 when notification marked as read      â”‚
â”‚                                                      â”‚
â”‚  const [showNotifications, setShowNotifications]    â”‚
â”‚       â†‘                                             â”‚
â”‚       â”‚ Toggles notification panel visibility       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI Component Hierarchy

```
Dashboard (Admin/Customer/Employee)
     â”‚
     â””â”€â†’ Navbar / EmployeeNavbar
              â”‚
              â”œâ”€â†’ Notification Icon ğŸ””
              â”‚        â”‚
              â”‚        â””â”€â†’ Unread Badge (count)
              â”‚
              â””â”€â†’ Notification Panel (dropdown)
                       â”‚
                       â”œâ”€â†’ Header
                       â”‚    â”œâ”€â†’ Title: "Notifications"
                       â”‚    â””â”€â†’ "Mark all as read" button
                       â”‚
                       â”œâ”€â†’ Notification List (scrollable)
                       â”‚    â”‚
                       â”‚    â””â”€â†’ Notification Item (foreach)
                       â”‚         â”œâ”€â†’ Unread indicator (blue dot)
                       â”‚         â”œâ”€â†’ Title (bold)
                       â”‚         â”œâ”€â†’ Message
                       â”‚         â”œâ”€â†’ Timestamp ("5 min ago")
                       â”‚         â””â”€â†’ Background color (by type)
                       â”‚
                       â””â”€â†’ Footer
                            â””â”€â†’ "View All Notifications" button
```

This architecture ensures:
- âœ… Real-time notification delivery
- âœ… Offline notification storage
- âœ… Type-safe TypeScript implementation
- âœ… Scalable and maintainable code structure
- âœ… Proper separation of concerns
- âœ… Error handling at every layer
